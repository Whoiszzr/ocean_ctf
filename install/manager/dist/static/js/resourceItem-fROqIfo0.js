import{_ as v,J as m,q as s,o as u,j as _,A as l,m as o,c as w,F as x,i as C,b as f,v as g,w as q}from"./index-c6YpnN_1.js";import{a as B}from"./mavon-editor-afyf__kG.js";/* empty css              */const E={components:{mavonEditor:B.mavonEditor},name:"addQuestion",props:{show:{type:Boolean},data:{type:Object}},data(){return{docker_type_list:[{label:"远程镜像",id:1},{label:"本地镜像",id:2}],resource_list:[],hostOption:[],imageOption:[],capture:null,fileChange:!1,options:[],attachment:[],form:{attachment:[],docker_type:null,image:null,name:null,description:null},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择类别",trigger:"blur"}],desc:[{required:!0,message:"请填写描述信息",trigger:"blur"},{min:3,max:200,message:"长度在 3 到 200 个字符",trigger:"blur"}],flag:[{required:!0,message:"请输入flag",trigger:"blur"},{min:3,max:64,message:"长度在 3 到 64 个字符",trigger:"blur"}]}}},created(){this.getOptions(),this.getResourceList()},methods:{getOptions(){m.get("/api/admin/ctf/question/type").then(n=>{this.options=n.data})},getResourceList(){m.get("/api/admin/docker/resource",{page_size:99999,status:1}).then(n=>{this.resource_list=n.data})},cancel(){this.$emit("action",!1)},submit(){this.form.id||m.post("/api/admin/vulnerability",this.form).then(n=>{this.$emit("action",!0),this.$message({message:"提交成功",type:"success"})})}}},O={id:"my-markdown",class:"markdown-body"},N={slot:"footer",class:"dialog-footer"};function U(n,r,d,L,e,a){const c=s("el-input"),i=s("el-form-item"),b=s("el-option"),h=s("el-select"),k=s("mavon-editor"),y=s("el-form"),p=s("el-button"),V=s("el-dialog");return d.show?(u(),_(V,{key:0,"before-close":a.cancel,"show-close":!0,title:e.form.id?"编辑资源":"添加资源",visible:d.show,center:"","destroy-on-close":"","close-on-click-modal":!1,onClose:a.cancel,width:"40%"},{default:l(()=>[o(y,{model:e.form,ref:"form",class:"form","label-width":"80px",rules:e.rules},{default:l(()=>[o(i,{label:"资源名称",docker_type_list:""},{default:l(()=>[o(c,{modelValue:e.form.name,"onUpdate:modelValue":r[0]||(r[0]=t=>e.form.name=t)},null,8,["modelValue"])]),_:1}),o(i,{label:"加载类型",required:""},{default:l(()=>[o(h,{modelValue:e.form.docker_type,"onUpdate:modelValue":r[1]||(r[1]=t=>e.form.docker_type=t)},{default:l(()=>[(u(!0),w(x,null,C(e.docker_type_list,t=>(u(),_(b,{label:t.label,key:t.id,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(i,{label:"镜像名称"},{default:l(()=>[o(c,{modelValue:e.form.image,"onUpdate:modelValue":r[2]||(r[2]=t=>e.form.image=t)},null,8,["modelValue"])]),_:1}),o(i,{label:"描述"},{default:l(()=>[f("div",O,[o(k,{modelValue:e.form.description,"onUpdate:modelValue":r[3]||(r[3]=t=>e.form.description=t)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"]),f("span",N,[o(p,{onClick:a.cancel},{default:l(()=>[g("取 消")]),_:1},8,["onClick"]),o(p,{type:"primary",onClick:a.submit},{default:l(()=>[g("确 定")]),_:1},8,["onClick"])])]),_:1},8,["before-close","title","visible","onClose"])):q("",!0)}const R=v(E,[["render",U],["__scopeId","data-v-d8ab1a22"]]);export{R as default};
