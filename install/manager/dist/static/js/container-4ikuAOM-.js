import{_ as w,J as _,q as s,M as z,o as h,c as k,b as c,m as e,A as n,v as d,N as Q,j as V,t as L}from"./index-RjY-6op9.js";const x={name:"container",data(){return{loading:!1,data:[],total:0,listQuery:{page:1,page_size:10}}},created(){this.getList()},methods:{getList(){this.loading=!0,_.get("/api/admin/ctf/resource",this.listQuery).then(t=>{this.data=t.data,this.total=t.total,this.loading=!1})},handleSizeChange(t){this.listQuery.page_size=t,this.getList()},handleCurrentChange(t){this.listQuery.page=t,this.getList()},refresh(t){_.post(`/api/admin/ctf/resource/${t.id}/refresh`).then(a=>{this.getList()}).catch(a=>{})},containerRemove(t){_.post(`/api/admin/ctf/resource/${t.id}/remove`).then(a=>{this.$message({message:"销毁成功",type:"success"}),this.getList()}).catch(a=>{this.getList()})}}},S={class:"page-container"},q={class:"widget"},B=c("div",{class:"tool-bar"},"赛事容器",-1),N={class:"search-group"},D={class:"widget-body"},j={class:"page-r"};function R(t,a,U,A,l,r){const g=s("el-input"),p=s("el-form-item"),u=s("el-button"),m=s("el-form"),i=s("el-table-column"),f=s("el-tooltip"),y=s("el-table"),v=s("el-pagination"),C=z("loading");return h(),k("div",S,[c("div",q,[B,c("div",N,[e(m,{inline:""},{default:n(()=>[e(p,null,{default:n(()=>[e(g,{modelValue:l.listQuery.username,"onUpdate:modelValue":a[0]||(a[0]=o=>l.listQuery.username=o),placeholder:"用户名"},null,8,["modelValue"])]),_:1}),e(p,null,{default:n(()=>[e(g,{modelValue:l.listQuery.question,"onUpdate:modelValue":a[1]||(a[1]=o=>l.listQuery.question=o),placeholder:"题目名称"},null,8,["modelValue"])]),_:1}),e(p,null,{default:n(()=>[e(u,{type:"primary",onClick:a[2]||(a[2]=o=>r.getList())},{default:n(()=>[d("查询")]),_:1})]),_:1})]),_:1})]),c("div",D,[Q((h(),V(y,{data:l.data,"highlight-current-row":""},{default:n(()=>[e(i,{align:"center",label:"名称",prop:"name"}),e(i,{align:"center",label:"用户",prop:"username",width:"80"}),e(i,{align:"center",label:"题目",prop:"question.name",width:"100"}),e(i,{align:"center",label:"端口信息",prop:"container_port"},{default:n(o=>[d(L(o.row.container_port),1)]),_:1}),e(i,{align:"center",label:"Flag",prop:"flag"}),e(i,{align:"center",label:"创建日期",prop:"date_created",width:"160"}),e(i,{align:"center",label:"有效时间",prop:"destroy_time",width:"160"}),e(i,{align:"center",label:"操作",width:"160"},{default:n(o=>[e(f,{class:"item",content:"删除容器",effect:"dark",placement:"top"},{default:n(()=>[e(u,{type:"danger",onClick:b=>r.containerRemove(o.row)},{default:n(()=>[d("销毁")]),_:2},1032,["onClick"])]),_:2},1024),e(u,{type:"primary",onClick:b=>r.refresh(o.row)},{default:n(()=>[d("刷新")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[C,l.loading]]),c("div",j,[e(v,{"current-page":l.listQuery.page,"page-size":l.listQuery.page_size,"page-sizes":[10,20,30,50],total:l.total,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:r.handleSizeChange,onCurrentChange:r.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])])])}const F=w(x,[["render",R]]);export{F as default};
