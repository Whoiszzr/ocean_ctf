import{m as T}from"./index-c8cd2670.js";import{_ as q,az as _,q as n,o as m,c as f,m as e,A as s,F as v,i as V,j as g,v as c,t as I,b as h}from"./index-5ba26d12.js";const N={name:"resources",components:{mavonEditor:T.mavonEditor},data(){return{inputValue:"",docker_type_list:[{label:"远程镜像",id:1}],form:{name:"",app:"",cve:[],description:"",image:""}}},created(){let{query:a}=this.$route,t=a.id;t&&this.getItem(t)},methods:{getItem(a){_.get(`/api/admin/vuln/${a}`).then(t=>{let r=t.data;this.form.id=a,this.form.app=r.app,this.form.cve=r.cve||[],this.form.name=r.name,this.form.description=r.description,this.form.image="1",this.form.docker_type=r.docker_type})},goBack(){this.$router.back()},handleSubmit(){this.form.id?_.put(`/api/admin/vuln/${this.form.id}`,this.form).then(a=>{this.$emit("action",!0),this.$message({message:"提交成功",type:"success"}),this.$router.replace({name:"vuln.resource"})}):_.post("/api/admin/vuln",this.form).then(a=>{this.$emit("action",!0),this.$message({message:"提交成功",type:"success"}),this.$router.replace({name:"vuln.resource"})})},removeTag(a){this.form.cve.splice(a,1)},addTags(){this.inputValue&&(this.form.cve.push(this.inputValue),this.inputValue="")}}},S={class:"page-container"},F=["onClick"],R={id:"my-markdown",class:"markdown-body"},j={class:"button-group"};function z(a,t,r,A,l,d){const u=n("el-input"),i=n("el-form-item"),k=n("el-option"),y=n("el-select"),b=n("el-tag"),p=n("el-button"),x=n("mavon-editor"),C=n("el-form"),w=n("el-col"),B=n("el-row"),E=n("el-card");return m(),f("div",S,[e(E,{style:{height:"100%"}},{default:s(()=>[e(B,{gutter:20},{default:s(()=>[e(w,{xs:24,sm:{span:20,offset:2},md:{span:20,offset:2},lg:{span:14,offset:5},xl:{span:12,offset:6}},{default:s(()=>[e(C,{model:l.form,ref:"form",class:"form","label-width":"80px"},{default:s(()=>[e(i,{label:"资源名称",docker_type_list:""},{default:s(()=>[e(u,{modelValue:l.form.name,"onUpdate:modelValue":t[0]||(t[0]=o=>l.form.name=o)},null,8,["modelValue"])]),_:1}),e(i,{label:"组件",docker_type_list:""},{default:s(()=>[e(u,{modelValue:l.form.app,"onUpdate:modelValue":t[1]||(t[1]=o=>l.form.app=o)},null,8,["modelValue"])]),_:1}),e(i,{label:"加载类型",required:""},{default:s(()=>[e(y,{modelValue:l.form.docker_type,"onUpdate:modelValue":t[2]||(t[2]=o=>l.form.docker_type=o)},{default:s(()=>[(m(!0),f(v,null,V(l.docker_type_list,o=>(m(),g(k,{label:o.label,key:o.id,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"CVE"},{default:s(()=>[(m(!0),f(v,null,V(l.form.cve,(o,U)=>(m(),g(b,{key:o},{default:s(()=>[c(I(o)+" ",1),h("span",{class:"close-icon",onClick:D=>d.removeTag(U)},"x",8,F)]),_:2},1024))),128)),e(u,{modelValue:l.inputValue,"onUpdate:modelValue":t[3]||(t[3]=o=>l.inputValue=o),placeholder:"输入标签内容"},null,8,["modelValue"]),e(p,{onClick:d.addTags},{default:s(()=>[c("添加标签")]),_:1},8,["onClick"])]),_:1}),e(i,{label:"镜像名称"},{default:s(()=>[e(u,{modelValue:l.form.image,"onUpdate:modelValue":t[4]||(t[4]=o=>l.form.image=o)},null,8,["modelValue"])]),_:1}),e(i,{label:"描述"},{default:s(()=>[h("div",R,[e(x,{modelValue:l.form.description,"onUpdate:modelValue":t[5]||(t[5]=o=>l.form.description=o)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"]),h("div",j,[e(p,{type:"primary",onClick:d.handleSubmit},{default:s(()=>[c("提交")]),_:1},8,["onClick"]),e(p,{type:"info",onClick:d.goBack},{default:s(()=>[c("返回")]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})])}const H=q(N,[["render",z],["__scopeId","data-v-de39a3cc"]]);export{H as default};
