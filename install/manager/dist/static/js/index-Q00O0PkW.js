import{_ as U,J as c,q as i,M as z,o as b,c as L,b as _,m as e,A as t,v as m,N as T,j as D}from"./index-RjY-6op9.js";const B={name:"index",data(){return{edit:!1,dialogUser:!1,TeamOptions:[],list:[],total:0,listLoading:!0,listQuery:{is_top:null,search:null,page:1,page_size:10},RolesData:[],form:{id:null,isTop:!1,active:!0,content:""}}},created(){this.getList()},methods:{getList(){this.listLoading=!0,c.get("/api/admin/notice",this.listQuery).then(a=>{this.list=a.data,this.total=a.total,this.listLoading=!1})},changeTop(a,o){let g={isTop:a};c.put(`/api/admin/notice/${o.id}`,g).then(V=>{})},changeActive(a,o){let g={active:a};c.put(`/api/admin/notice/${o.id}`,g).then(V=>{})},handleDelete(a){c.delete(`/api/admin/notice/${a.id}`).then(o=>{this.getList()})},handleSizeChange(a){this.listQuery.page_size=a,this.getList()},handleCurrentChange(a){this.listQuery.page=a,this.getList()},handleFilter(){this.getList()},handleCreate(){this.edit=!0},actionForm(){c.post("/api/admin/notice",this.form).then(a=>{this.edit=!1,this.getList()})}}},F={class:"page-container"},N={class:"widget"},S=_("div",{class:"tool-bar"},"公告提醒",-1),A={class:"search-group"},j={class:"widget-content"},q={class:"page-r"};function E(a,o,g,V,n,s){const v=i("el-input"),r=i("el-form-item"),h=i("el-option"),C=i("el-select"),p=i("el-button"),y=i("el-form"),u=i("el-table-column"),f=i("el-switch"),w=i("el-table"),k=i("el-pagination"),x=i("el-dialog"),Q=z("loading");return b(),L("div",F,[_("div",N,[S,_("div",A,[e(y,{inline:""},{default:t(()=>[e(r,null,{default:t(()=>[e(v,{modelValue:n.listQuery.search,"onUpdate:modelValue":o[0]||(o[0]=l=>n.listQuery.search=l),style:{width:"200px"},placeholder:"公告内容"},null,8,["modelValue"])]),_:1}),e(r,null,{default:t(()=>[e(C,{modelValue:n.listQuery.active,"onUpdate:modelValue":o[1]||(o[1]=l=>n.listQuery.active=l),placeholder:"是否启用",clearable:""},{default:t(()=>[e(h,{key:"1",label:"启用",value:"1"}),e(h,{key:"0",label:"未启用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:t(()=>[e(C,{modelValue:n.listQuery.is_top,"onUpdate:modelValue":o[2]||(o[2]=l=>n.listQuery.is_top=l),placeholder:"是否置顶",clearable:""},{default:t(()=>[e(h,{key:"1",label:"是",value:"1"}),e(h,{key:"0",label:"否",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:t(()=>[e(p,{type:"primary",onClick:s.handleFilter},{default:t(()=>[m("查询")]),_:1},8,["onClick"])]),_:1}),e(r,null,{default:t(()=>[e(p,{type:"primary",onClick:s.handleCreate},{default:t(()=>[m("添加")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_("div",j,[T((b(),D(w,{data:n.list,style:{width:"100%"},fit:"","highlight-current-row":"",stripe:""},{default:t(()=>[e(u,{align:"center",label:"ID",width:"70px",prop:"id"}),e(u,{label:"内容",align:"center",prop:"content"}),e(u,{label:"是否显示",width:"80",align:"center",prop:"active"},{default:t(l=>[e(f,{onChange:d=>s.changeActive(d,l.row),modelValue:l.row.active,"onUpdate:modelValue":d=>l.row.active=d},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"是否置顶",width:"80",align:"center",prop:"content"},{default:t(l=>[e(f,{onChange:d=>s.changeTop(d,l.row),modelValue:l.row.is_top,"onUpdate:modelValue":d=>l.row.is_top=d},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1}),e(u,{align:"center",label:"发布日期",prop:"date_created"}),e(u,{label:"操作",width:"120"},{default:t(l=>[e(p,{type:"danger",onClick:d=>s.handleDelete(l.row)},{default:t(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,n.listLoading]]),_("div",q,[e(k,{background:"","current-page":n.listQuery.page,"page-sizes":[10,20,30,50],"page-size":n.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])]),e(x,{width:"500px",title:"添加公告",center:"",modelValue:n.edit,"onUpdate:modelValue":o[7]||(o[7]=l=>n.edit=l)},{footer:t(()=>[e(p,{onClick:o[6]||(o[6]=l=>n.edit=!1)},{default:t(()=>[m("取消")]),_:1}),e(p,{type:"primary",onClick:s.actionForm},{default:t(()=>[m("添加")]),_:1},8,["onClick"])]),default:t(()=>[e(y,null,{default:t(()=>[e(r,{label:"是否公开"},{default:t(()=>[e(f,{modelValue:n.form.active,"onUpdate:modelValue":o[3]||(o[3]=l=>n.form.active=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"是否置顶"},{default:t(()=>[e(f,{modelValue:n.form.isTop,"onUpdate:modelValue":o[4]||(o[4]=l=>n.form.isTop=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"内容"},{default:t(()=>[e(v,{type:"textarea",modelValue:n.form.content,"onUpdate:modelValue":o[5]||(o[5]=l=>n.form.content=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const J=U(B,[["render",E]]);export{J as default};
