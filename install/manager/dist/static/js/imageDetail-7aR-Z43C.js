import{_ as k,az as h,q as g,o,c as i,b as t,F as p,i as m,j as C,A as c,v as f,t as s,w as d,m as r,ai as w,aj as D}from"./index-PSQyWyEH.js";const I={name:"imageDetail",data(){return{pk:null,history:[],data:{image:{Config:{Cmd:[]},Created:""}}}},created(){this.pk=this.$route.query.id,this.image=this.$route.query.image,this.getDetail(),this.getHistory()},methods:{getDetail(){h.get(`/api/admin/docker/host/${this.pk}/image/${this.image}`).then(a=>{this.data=a.results}).catch(a=>{})},delTag(a){h.post(`/api/admin/docker/host/${this.pk}/images/del_tag`,{tag:a}).then(u=>{this.getDetail()}).catch(u=>{})},getHistory(){h.get(`/api/admin/docker/host/${this.pk}/image_history/${this.image}`).then(a=>{this.history=a.results}).catch(a=>{})}}},l=a=>(w("data-v-11ba9705"),a=a(),D(),a),S={class:"container"},x={class:"wrap"},E={class:"widget"},T=l(()=>t("div",{class:"tool-bar"},"Image tags",-1)),z={key:0,class:"widget-content"},B={class:"widget"},N=l(()=>t("div",{class:"tool-bar"},"Image details",-1)),V={class:"widget-content"},j={class:"table"},F=l(()=>t("td",null,[t("span",{class:"td-attr"},"Id")],-1)),q={key:0,class:"td-val"},O=l(()=>t("td",null,[t("span",{class:"td-attr"},"Size")],-1)),P={class:"td-val"},R=l(()=>t("td",null,[t("span",{class:"td-attr"},"Created")],-1)),A={class:"td-val"},H=l(()=>t("td",null,[t("span",{class:"td-attr"},"Build")],-1)),L={class:"td-val"},M={class:"widget"},X=l(()=>t("div",{class:"tool-bar"},"Dockerfile details",-1)),Y={class:"widget-content"},G={class:"table"},J=l(()=>t("td",null,[t("span",{class:"td-attr"},"CMD")],-1)),K={key:0,class:"td-val"},Q=l(()=>t("td",null,[t("span",{class:"td-attr"},"ENTRYPOINT")],-1)),U={key:0,class:"td-val"},W=l(()=>t("td",null,[t("span",{class:"td-attr"},"EXPOSE")],-1)),Z={key:0,class:"td-val"},$={key:0},tt=l(()=>t("td",null,[t("span",{class:"td-attr"},"Env")],-1)),et={class:"td-val"},st={class:"widget"},at=l(()=>t("div",{class:"tool-bar"},"Image layerss",-1)),ot={class:"widget-content"},lt={key:0};function it(a,u,nt,dt,e,v){const y=g("el-tag"),_=g("el-table-column"),b=g("el-table");return o(),i("div",S,[t("div",x,[t("div",E,[T,e.data.image&&e.data.image.RepoTags?(o(),i("div",z,[(o(!0),i(p,null,m(e.data.image.RepoTags,n=>(o(),C(y,{class:"i-tag",onClose:ct=>v.delTag(n),closable:"","disable-transitions":!1,key:"tag"},{default:c(()=>[f(s(n),1)]),_:2},1032,["onClose"]))),128))])):d("",!0)]),t("div",B,[N,t("div",V,[t("table",null,[t("tbody",j,[t("tr",null,[F,t("td",null,[e.data.image?(o(),i("span",q,s(e.data.image.Id),1)):d("",!0)])]),t("tr",null,[O,t("td",null,[t("span",P,s((e.data.image.Size/1e3/1e3).toFixed(1)),1)])]),t("tr",null,[R,t("td",null,[t("span",A,s(e.data.image.Created.split(".")[0].replace("T"," ")),1)])]),t("tr",null,[H,t("td",null,[t("span",L,"Docker "+s(e.data.image.DockerVersion)+" on "+s(e.data.image.Os)+","+s(e.data.image.Architecture),1)])])])])])]),t("div",M,[X,t("div",Y,[t("table",null,[t("tbody",G,[t("tr",null,[J,t("td",null,[e.data.image.Config.Cmd?(o(),i("span",K,s(e.data.image.Config.Cmd.join(" ")),1)):d("",!0)])]),t("tr",null,[Q,t("td",null,[e.data.image.Config.Entrypoint?(o(),i("span",U,s(e.data.image.Config.Entrypoint.join()),1)):d("",!0)])]),t("tr",null,[W,t("td",null,[e.data.image.Config?(o(),i("span",Z,s(e.data.image.Config.ExposedPorts),1)):d("",!0)])]),e.data.image.Config?(o(),i("tr",$,[tt,t("td",null,[t("span",et,[t("table",null,[t("tbody",null,[(o(!0),i(p,null,m(e.data.image.Config.Env,n=>(o(),i("tr",null,s(n),1))),256))])])])])])):d("",!0)])])])]),t("div",st,[at,t("div",ot,[r(b,{data:e.history},{default:c(()=>[r(_,{type:"index"}),r(_,{label:"Size"},{default:c(n=>[n.row.Size/1e3/1e3?(o(),i("span",lt,s((n.row.Size/1e3/1e3).toFixed(1))+"M",1)):d("",!0)]),_:1}),r(_,{label:"Layer"},{default:c(n=>[t("span",null,s(n.row.CreatedBy.replace("/bin/sh -c #(nop)","")),1)]),_:1})]),_:1},8,["data"])])])])])}const _t=k(I,[["render",it],["__scopeId","data-v-11ba9705"]]);export{_t as default};
