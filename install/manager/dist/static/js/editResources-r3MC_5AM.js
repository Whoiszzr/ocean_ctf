import{m as T}from"./mavon-editor-TsjNa067.js";/* empty css              */import{_ as q,J as _,q as s,o as m,c as f,m as e,A as n,F as V,i as v,j as k,v as p,t as I,b as h}from"./index-4M8rgsfr.js";const N={name:"resources",components:{mavonEditor:T.mavonEditor},data(){return{inputValue:"",docker_type_list:[{label:"远程镜像",id:1},{label:"本地镜像",id:2}],form:{name:"",app:"",cve:[],description:"",image:""}}},created(){let{query:r}=this.$route,o=r.id;o&&this.getItem(o)},methods:{getItem(r){_.get(`/api/admin/vulnerability/${r}`).then(o=>{let a=o.data;this.form.id=r,this.form.app=a.app,this.form.cve=a.cve||[],this.form.name=a.name,this.form.description=a.description,this.form.image="1",this.form.docker_type=a.docker_type})},goBack(){this.$router.back()},handleSubmit(){this.form.id?_.put(`/api/admin/vulnerability/${this.form.id}`,this.form).then(r=>{this.$emit("action",!0),this.$message({message:"提交成功",type:"success"}),this.$router.replace({name:"vulnerability.resource"})}):_.post("/api/admin/vulnerability",this.form).then(r=>{this.$emit("action",!0),this.$message({message:"提交成功",type:"success"}),this.$router.replace({name:"vulnerability.resource"})})},removeTag(r){this.form.cve.splice(r,1)},addTags(){this.inputValue&&(this.form.cve.push(this.inputValue),this.inputValue="")}}},S={class:"page-container"},F=["onClick"],j={id:"my-markdown",class:"markdown-body"},A={class:"button-group"};function D(r,o,a,J,l,d){const u=s("el-input"),i=s("el-form-item"),b=s("el-option"),g=s("el-select"),y=s("el-tag"),c=s("el-button"),C=s("mavon-editor"),x=s("el-form"),w=s("el-col"),B=s("el-row"),U=s("el-card");return m(),f("div",S,[e(U,{style:{height:"100%"}},{default:n(()=>[e(B,{gutter:20},{default:n(()=>[e(w,{xs:24,sm:{span:20,offset:2},md:{span:20,offset:2},lg:{span:14,offset:5},xl:{span:12,offset:6}},{default:n(()=>[e(x,{model:l.form,ref:"form",class:"form","label-width":"80px"},{default:n(()=>[e(i,{label:"资源名称",docker_type_list:""},{default:n(()=>[e(u,{modelValue:l.form.name,"onUpdate:modelValue":o[0]||(o[0]=t=>l.form.name=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"组件",docker_type_list:""},{default:n(()=>[e(u,{modelValue:l.form.app,"onUpdate:modelValue":o[1]||(o[1]=t=>l.form.app=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"加载类型",required:""},{default:n(()=>[e(g,{modelValue:l.form.docker_type,"onUpdate:modelValue":o[2]||(o[2]=t=>l.form.docker_type=t)},{default:n(()=>[(m(!0),f(V,null,v(l.docker_type_list,t=>(m(),k(b,{label:t.label,key:t.id,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"CVE"},{default:n(()=>[(m(!0),f(V,null,v(l.form.cve,(t,E)=>(m(),k(y,{key:t},{default:n(()=>[p(I(t)+" ",1),h("span",{class:"close-icon",onClick:L=>d.removeTag(E)},"x",8,F)]),_:2},1024))),128)),e(u,{modelValue:l.inputValue,"onUpdate:modelValue":o[3]||(o[3]=t=>l.inputValue=t),placeholder:"输入标签内容"},null,8,["modelValue"]),e(c,{onClick:d.addTags},{default:n(()=>[p("添加标签")]),_:1},8,["onClick"])]),_:1}),e(i,{label:"镜像名称"},{default:n(()=>[e(u,{modelValue:l.form.image,"onUpdate:modelValue":o[4]||(o[4]=t=>l.form.image=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"描述"},{default:n(()=>[h("div",j,[e(C,{modelValue:l.form.description,"onUpdate:modelValue":o[5]||(o[5]=t=>l.form.description=t)},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"]),h("div",A,[e(c,{type:"primary",onClick:d.handleSubmit},{default:n(()=>[p("提交")]),_:1},8,["onClick"]),e(c,{type:"info",onClick:d.goBack},{default:n(()=>[p("返回")]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})])}const H=q(N,[["render",D],["__scopeId","data-v-d0478668"]]);export{H as default};
