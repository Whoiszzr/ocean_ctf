import{_ as D,J as c,q as o,M as k,o as r,c as m,m as e,A as s,F as y,i as b,j as _,v as w,b as p,N as T,t as A}from"./index-QDrcbRr8.js";import N from"./questionItem-5jK22RUU.js";const S={name:"Question",components:{questionItem:N},data(){return{qType:[],statusList:[],statusType:["","primary","info","danger","warning"],total:0,listQuery:{has_solved:null,capture:null,page_size:10,q_type:null},loading:!1,chiData:{},showAddQuestion:!1,data:[],rid:null,captureName:null}},created(){this.getData(),this.getOptions()},methods:{getOptions(){c.get("/api/admin/ctf/answers/status_list").then(a=>{this.statusList=a.data}),c.get("/api/admin/ctf/question/type").then(a=>{this.qType=a.data})},handleSizeChange(a){this.listQuery.page_size=a,this.getData()},handleCurrentChange(a){this.listQuery.page=a,this.getData()},getData(){this.loading=!0,c.get("/api/admin/ctf/answers",this.listQuery).then(a=>{this.data=a.data,this.total=a.total,this.loading=!1})},handleAdd(){this.showAddQuestion=!1,this.getData()},switchActive(a,n){c.post(`/api/manager/ctf/question/${n.id}/active/`,{active:a}).then(v=>{this.$message({message:"修改成功",type:"success",duration:2e3})})}}},B={class:"main"},L={class:"w-[99/100] mt-2 px-2 pb-2 bg-bg_color"},U=p("div",{class:"flex justify-between w-full h-[60px] p-4"},[p("p",{class:"font-bold truncate"},"答题列表")],-1),j={class:"page-r"};function F(a,n,v,I,l,d){const g=o("el-option"),h=o("el-select"),u=o("el-form-item"),f=o("el-input"),Q=o("el-button"),C=o("el-form"),i=o("el-table-column"),V=o("el-tag"),q=o("el-table"),x=o("el-pagination"),z=k("loading");return r(),m("div",B,[e(C,{class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px]",inline:!0},{default:s(()=>[e(u,{class:"el-form-item",label:"分类"},{default:s(()=>[e(h,{modelValue:l.listQuery.q_type,"onUpdate:modelValue":n[0]||(n[0]=t=>l.listQuery.q_type=t),class:"select",clearable:"",filterable:""},{default:s(()=>[(r(!0),m(y,null,b(l.qType,t=>(r(),_(g,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{class:"el-form-item",label:"状态"},{default:s(()=>[e(h,{modelValue:l.listQuery.status,"onUpdate:modelValue":n[1]||(n[1]=t=>l.listQuery.status=t),class:"select",clearable:"",filterable:""},{default:s(()=>[(r(!0),m(y,null,b(l.statusList,t=>(r(),_(g,{key:t[0],label:t[1],value:t[0]},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{class:"el-form-item",label:"用户名"},{default:s(()=>[e(f,{modelValue:l.listQuery.username,"onUpdate:modelValue":n[2]||(n[2]=t=>l.listQuery.username=t),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(u,{class:"el-form-item",label:"题目"},{default:s(()=>[e(f,{modelValue:l.listQuery.question,"onUpdate:modelValue":n[3]||(n[3]=t=>l.listQuery.question=t),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(u,null,{default:s(()=>[e(Q,{style:{margin:"0 5px"},type:"primary",onClick:d.getData},{default:s(()=>[w("查询")]),_:1},8,["onClick"])]),_:1})]),_:1}),p("div",L,[U,p("div",null,[T((r(),_(q,{data:l.data,stripe:"","highlight-current-row":""},{default:s(()=>[e(i,{align:"center",label:"提交人",prop:"username",width:"120"}),e(i,{align:"center",label:"题目",prop:"question.name",width:"220"}),e(i,{align:"center",label:"类别",prop:"question.type",width:"100"}),e(i,{align:"center",label:"得分",prop:"score",width:"100"}),e(i,{align:"center",label:"Flag",prop:"flag","class-name":"fnt-12"}),e(i,{align:"center",label:"状态",prop:"has_solved",width:"100"},{default:s(t=>[e(V,{effect:"dark",type:l.statusType[t.row.status]},{default:s(()=>[w(A(t.row.status_name),1)]),_:2},1032,["type"])]),_:1}),e(i,{align:"center",label:"提交IP",prop:"ip",width:"150","class-name":"fnt-12"}),e(i,{align:"center",label:"提交时间",prop:"date_created",width:"150","class-name":"fnt-12"})]),_:1},8,["data"])),[[z,l.loading]]),p("div",j,[e(x,{"current-page":l.listQuery.page,"page-size":l.listQuery.page_size,"page-sizes":[10,20,30,50],total:l.total,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:d.handleSizeChange,onCurrentChange:d.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])])])}const J=D(S,[["render",F]]);export{J as default};
