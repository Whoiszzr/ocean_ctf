import{_ as V,az as m,q as r,o as d,j as f,A as s,m as l,c as w,F as g,i as y,b as v,v as u,t as x}from"./index-CmHyWis5.js";const k={name:"editAdmin",props:{form:{type:Object,default:()=>{}}},data(){return{show:!1,title:"",formData:{},roles:[]}},created(){this.show=!0,this.getRole(),this.formData=this.form||{},this.formData.id?this.title="编辑管理员":this.title="添加管理员"},methods:{getRole(){m.get("/api/admin/role").then(a=>{this.roles=a.data})},submit(){this.form?m.put(`/api/admin/admin/${this.formData.id}`,this.formData).then(a=>{this.$message({message:"操作成功",type:"success"}),this.$emit("handleEdit",!0)}).catch(a=>{}):m.post("/api/admin/admin",this.formData).then(a=>{this.$message({message:"添加成功",type:"success"}),this.$emit("handleEdit",!0)}).catch(a=>{})}}},C={slot:"footer",class:"dialog-footer"};function E(a,o,B,U,e,c){const n=r("el-input"),i=r("el-form-item"),_=r("el-option"),h=r("el-select"),b=r("el-form"),p=r("el-button"),D=r("el-dialog");return d(),f(D,{center:"",visible:e.show,title:e.title,onClose:o[5]||(o[5]=t=>a.$emit("handleEdit",!1))},{default:s(()=>[l(b,{ref:"dataForm",model:e.formData,"label-position":"left","label-width":"80px","label-suffix":":",style:{width:"600px",margin:"auto auto","font-size":"13px"}},{default:s(()=>[l(i,{label:"用户名",prop:"username"},{default:s(()=>[l(n,{modelValue:e.formData.username,"onUpdate:modelValue":o[0]||(o[0]=t=>e.formData.username=t)},null,8,["modelValue"])]),_:1}),l(i,{class:"el-form-item",label:"角色"},{default:s(()=>[l(h,{modelValue:e.formData.role,"onUpdate:modelValue":o[1]||(o[1]=t=>e.formData.role=t),class:"select",clearable:""},{default:s(()=>[(d(!0),w(g,null,y(e.roles,t=>(d(),f(_,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"密    码",prop:"password"},{default:s(()=>[l(n,{modelValue:e.formData.password,"onUpdate:modelValue":o[2]||(o[2]=t=>e.formData.password=t),type:"password"},null,8,["modelValue"])]),_:1}),l(i,{label:"确认密码",prop:"confirm_password",style:{"font-size":"12px"}},{default:s(()=>[l(n,{modelValue:e.formData.confirm_password,"onUpdate:modelValue":o[3]||(o[3]=t=>e.formData.confirm_password=t),type:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),v("div",C,[l(p,{onClick:o[4]||(o[4]=t=>a.$emit("handleEdit",!1))},{default:s(()=>[u("取消")]),_:1}),l(p,{type:"primary",onClick:c.submit},{default:s(()=>[u(x(e.formData.id?"更新":"提交"),1)]),_:1},8,["onClick"])])]),_:1},8,["visible","title"])}const A=V(k,[["render",E]]);export{A as default};
